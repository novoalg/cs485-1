<div class="small-12 columns">
  <h1>Users</h1>
  <table>
    <thead>
      <tr>
        <th>Email</th>
        <th colspan="2">Role</th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
      <tr>
        <td><%= link_to user.email, user %></td>
        <% unless user.role_id > current_user.role_id %>
          <%= form_for user do |form| %>
            <td>
              <div class="range-slider" data-slider data-options="start: 1; end: <%= current_user.role_id + 1 %>; initial: <%= user.role_id + 1 %>">
                <span class="range-slider-handle" role="slider" tabindex="0"></span>
                <span class="range-slider-active-segment"></span> 
                <%= form.hidden_field :role_id %>
              </div>
            </td>
            <td><%= form.submit "Update" %></td>
          <% end %>
        <% else %>
          <td>
            <div class="range-slider disabled" data-slider data-options="start: 1; end: <%= current_user.role_id + 1 %>; initial: <%= user.role_id + 1 %>">
              <span class="range-slider-handle" role="slider" tabindex="0"></span>
              <span class="range-slider-active-segment"></span> 
            </div>
          </td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>
